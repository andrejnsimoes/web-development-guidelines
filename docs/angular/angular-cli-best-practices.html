<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>What are we going to learn</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/web-development-guidelines/assets/css/0.styles.55b66cfc.css" as="style"><link rel="preload" href="/web-development-guidelines/assets/js/app.619e207b.js" as="script"><link rel="preload" href="/web-development-guidelines/assets/js/6.e9c321fb.js" as="script"><link rel="prefetch" href="/web-development-guidelines/assets/js/15.35f51890.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/2.cda51ec0.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/3.9f1531d6.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/4.87c874f8.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/5.dd094de2.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/7.250c8d9d.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/8.348a10fe.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/9.6392689b.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/10.bd1c58ab.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/11.d21adb37.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/12.3cd62bb9.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/13.b26b65b0.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/14.8faec2af.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/16.94cda7f5.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/17.0c7f3574.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/18.b59d2269.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/19.ade22912.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/20.3662ab7a.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/21.d8d39710.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/22.97a30b23.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/23.4c4f544d.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/24.64505df8.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/25.0dd8fbbb.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/26.be3c1b35.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/27.4ecc62cd.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/28.be69aaab.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/29.b3a0daa6.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/30.3e451a60.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/31.f23344bd.js">
    <link rel="stylesheet" href="/web-development-guidelines/assets/css/0.styles.55b66cfc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/web-development-guidelines/" class="home-link router-link-active"></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!---->  <!----> </div> <div class="page"> <div class="content"><p>Developing Angular apps with <a href="https://www.sitepoint.com/ultimate-angular-cli-reference/" target="_blank" rel="noopener noreferrer">Angular CLI<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is a very pleasurable experience! Angular team provided us with amazing CLI which supports most of the things which are needed for any serious project out of the box.</p> <p>Standardized project structure with full testing capabilities (both unit and e2e testing), code scaffolding, production grade build with support for using environment specific configuration. That’s a dream come true and lots of saved hours on every new projects. Thank you Angular team! 💖</p> <p>While Angular CLI works great from the get go, there are some potential configuration improvements and best practices we can utilize to make our projects even better!</p> <h3 id="what-are-we-going-to-learn"><a href="#what-are-we-going-to-learn" aria-hidden="true" class="header-anchor">#</a> What are we going to learn</h3> <ol><li><p>Best practices for architecture with <strong>Core</strong>, <strong>Shared</strong> and lazy-loaded <strong>Feature</strong> modules</p></li> <li><p>Using <strong>aliases</strong> for app and environments folders to support cleaner imports</p></li> <li><p>Why and how to use <strong>Sass</strong> and Angular Material</p></li> <li><p>How to setup good <strong>production</strong> build</p></li> <li><p>How to wave PhantomJS goodbye and use <strong>Headless Chrome</strong> instead (testing)</p></li> <li><p>How to release our project with automatically generated <strong>changelog</strong> and correct version bump</p></li></ol> <h2 id="_1-a-bit-of-architecture"><a href="#_1-a-bit-of-architecture" aria-hidden="true" class="header-anchor">#</a> 1. A bit of architecture</h2> <blockquote><h1 id="ok-so-we-generated-our-new-fresh-project-using-angular-cli-but-what-now-should-we-just-keep-generating-our-services-and-components-into-some-random-folders-how-do-we-structure-our-project"><a href="#ok-so-we-generated-our-new-fresh-project-using-angular-cli-but-what-now-should-we-just-keep-generating-our-services-and-components-into-some-random-folders-how-do-we-structure-our-project" aria-hidden="true" class="header-anchor">#</a> OK, so we generated our new fresh project using Angular CLI but what now? Should we just keep generating our services and components into some random folders. How do we structure our project?</h1></blockquote> <p>A good guideline to follow is to split our application into at least three different modules — Core, Shared and Feature (we will probably need more than one feature module though😉).</p> <h3 id="coremodule"><a href="#coremodule" aria-hidden="true" class="header-anchor">#</a> CoreModule</h3> <p>All services which have to have one and only one instance per application (singleton services) should be implemented here. Typical example can be authentication service or user service. Let’s look at an example of CoreModule implementation.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/* 3rd party libraries */</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> NgModule<span class="token punctuation">,</span> Optional<span class="token punctuation">,</span> SkipSelf <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> CommonModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/common'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> HttpClientModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/common/http'</span><span class="token punctuation">;</span>

<span class="token comment">/* our own custom services  */</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> SomeSingletonService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./some-singleton/some-singleton.service'</span><span class="token punctuation">;</span>

@<span class="token function">NgModule</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  imports<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">/* 3rd party libraries */</span>
    CommonModule<span class="token punctuation">,</span>
    HttpClientModule<span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  declarations<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  providers<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">/* our own custom services  */</span>
    SomeSingletonService
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">CoreModule</span> <span class="token punctuation">{</span>
  <span class="token comment">/* make sure CoreModule is imported only by one NgModule the AppModule */</span>
  <span class="token function">constructor</span> <span class="token punctuation">(</span>
    @<span class="token function">Optional</span><span class="token punctuation">(</span><span class="token punctuation">)</span> @<span class="token function">SkipSelf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> parentModule<span class="token punctuation">:</span> CoreModule
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>parentModule<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'CoreModule is already loaded. Import only in AppModule'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="sharedmodule"><a href="#sharedmodule" aria-hidden="true" class="header-anchor">#</a> SharedModule</h3> <p>All the “dumb” components and pipes should be implemented here. These components don’t import and inject services from core or other features in their constructors. They should receive all data though attributes in the template of the component using them. This all sums up to the fact that SharedModule doesn’t have any dependency to the rest of our application.</p> <p>It is also the perfect place to import and re-export Angular Material components.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/* 3rd party libraries */</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> NgModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> CommonModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/common'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> FormsModule  <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/forms'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> MdButtonModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/material'</span><span class="token punctuation">;</span>

<span class="token comment">/* our own custom components */</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> SomeCustomComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./some-custom/some-custom.component'</span><span class="token punctuation">;</span>

@<span class="token function">NgModule</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  imports<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">/* angular stuff */</span>
    CommonModule<span class="token punctuation">,</span>
    FormsModule<span class="token punctuation">,</span>

    <span class="token comment">/* 3rd party components */</span>
    MdButtonModule<span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  declarations<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    SomeCustomComponent
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  exports<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">/* angular stuff */</span>
    CommonModule<span class="token punctuation">,</span>
    FormsModule<span class="token punctuation">,</span>

    <span class="token comment">/* 3rd party components */</span>
    MdButtonModule<span class="token punctuation">,</span>

    <span class="token comment">/* our own custom components */</span>
    SomeCustomComponent
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">SharedModule</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
</code></pre></div><h3 id="how-to-prepare-project-structure-using-angular-cli"><a href="#how-to-prepare-project-structure-using-angular-cli" aria-hidden="true" class="header-anchor">#</a> How to prepare project structure using Angular CLI</h3> <p>We can generate Core and Shared modules right after the creation of our new project. That way, we will be prepared for generation of additional components and services right from the start.</p> <p>Run ng generate module core. Then create index.ts file in the core folder and re-export the CoreModule itself. We will be re-exporting additional public services which should be available in the whole application during further development.</p> <p>That being done, we can do the same for shared module.</p> <h3 id="featuremodule"><a href="#featuremodule" aria-hidden="true" class="header-anchor">#</a> FeatureModule</h3> <p>We are going to create multiple feature modules for every independent feature of our application. Feature modules should only import services from CoreModule. If feature module A needs to import service from feature module B consider moving that service into core.</p> <blockquote><p>In some cases there is a need for services which are shared only by some features and it wouldn’t make much sense to move them into core. In that case we can create special shared feature modules as described later in this post.</p> <h1 id="rule-of-thumb-is-to-try-to-create-features-which-don’t-depend-on-any-other-features-just-on-services-provided-by-coremodule-and-components-provided-by-sharedmodule"><a href="#rule-of-thumb-is-to-try-to-create-features-which-don’t-depend-on-any-other-features-just-on-services-provided-by-coremodule-and-components-provided-by-sharedmodule" aria-hidden="true" class="header-anchor">#</a> Rule of thumb is to try to create features which don’t depend on any other features just on services provided by CoreModule and components provided by SharedModule.</h1></blockquote> <p>This will keep our code clean, easy to maintain and extend with new features. It also reduces effort needed for refactoring. If followed properly, we will be confident that changes to one feature can’t affect or break the rest of our application.</p> <h3 id="lazyloading"><a href="#lazyloading" aria-hidden="true" class="header-anchor">#</a> LazyLoading</h3> <p>We should lazy load our feature modules whenever possible. Theoretically only one feature module should be loaded synchronously during the app startup to show initial content. Every other feature module should be loaded lazily after user triggered navigation.</p> <h2 id="_2-aliases-for-app-and-environments"><a href="#_2-aliases-for-app-and-environments" aria-hidden="true" class="header-anchor">#</a> 2. Aliases for app and environments</h2> <p>Aliasing our app and environments folders will enable us to implement clean imports which will be consistent throughout our application.</p> <p>Consider hypothetical, but usual situation. We are working on a component which is located three folders deep in a feature A and we want to import service from the core which is located two folders deep. This would lead to import statement looking something like import { SomeService } from '../../../core/subpackage1/subpackage2/some.service'.</p> <blockquote><h1 id="definitely-not-the-cleanest-import-ever…"><a href="#definitely-not-the-cleanest-import-ever…" aria-hidden="true" class="header-anchor">#</a> Definitely not the cleanest import ever…</h1></blockquote> <p>And what is even worse, any time we want to change location of any of those two files our import statement will break. Compare that to much shorter import { SomeService } from &quot;@app/core&quot;. Looks better, doesn’t it?</p> <p>To be able to use aliases we have to add baseUrl and paths properties to our tsconfig.json file like this…</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
   compilerOptions<span class="token operator">:</span><span class="token punctuation">{</span>
      ...<span class="token operator">:</span><span class="token string">&quot;reduced for brevity&quot;</span><span class="token punctuation">,</span>
      baseUrl<span class="token operator">:</span><span class="token string">&quot;src&quot;</span><span class="token punctuation">,</span>
      paths<span class="token operator">:</span><span class="token punctuation">{</span>
         @app/*<span class="token operator">:</span><span class="token punctuation">[</span>
            <span class="token string">&quot;app/*&quot;</span>
         <span class="token punctuation">]</span><span class="token punctuation">,</span>
         @env/*<span class="token operator">:</span><span class="token punctuation">[</span>
            <span class="token string">&quot;environments/*&quot;</span>
         <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>We are also adding @env alias to be able to easily access environment variables from anywhere in our application using same import { environment } from &quot;@env/environment&quot; statement. It will work for all specified environments because it will automatically resolve correct environment file based on --env flag passed to ng build command.</p></blockquote> <p>With our paths in place we can now import environment and services like this…</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/* 3rd party libraries */</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> OnInit <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Observable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs/Observable'</span><span class="token punctuation">;</span>

<span class="token comment">/* globally accessible app code (in every feature module) */</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> SomeSingletonService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@app/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> environment <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@env/environment'</span><span class="token punctuation">;</span>

<span class="token comment">/* localy accessible feature module code, always use relative path */</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ExampleService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./example.service'</span><span class="token punctuation">;</span>

@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ExampleComponent</span> <span class="token keyword">implements</span> <span class="token class-name">OnInit</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>
    <span class="token keyword">private</span> someSingletonService<span class="token punctuation">:</span> SomeSingletonService<span class="token punctuation">,</span>
    <span class="token keyword">private</span> exampleService<span class="token punctuation">:</span> ExampleService
  <span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>You may have noticed that we’re importing entities (like SomeSingletonService in the example above) directly from the @app/core instead of @app/core/some-package/some-singleton.service. This is possible thanks to re-exporting every public entity in main <em>index.ts</em> file. We create one *index.ts *file per package (folder) and they look something like this…</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">'./core.module'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">'./auth/auth.service'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">'./user/user.service'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">'./some-singleton-service/some-singleton.service'</span><span class="token punctuation">;</span>
</code></pre></div><p>In most apps components and services of particular feature module will usually only have to have access to services from the CoreModule and components from SharedModule. Sometimes this might not be enough to solve particular business case and we will also need some kind of “shared feature module” which is providing functionality for a limited subset of other feature modules.</p> <p>In this case we will end up with something like import { SomeService } from '@app/shared-feature'; So similarly to <em>core</em>, <em>shared-feature</em> is also accessed using @app alias.</p> <p><img src="https://cdn-images-1.medium.com/max/2000/1*6iBDGXV1ONrIMXm664kKHg.png" alt="Module dependencies follow tree structure which looks very similar to the well-known component tree"></p> <h2 id="_3-using-sass"><a href="#_3-using-sass" aria-hidden="true" class="header-anchor">#</a> 3. Using Sass</h2> <p>Sass is a styles preprocessor which brings support for fancy things like variables (even though css will get variables soon too), functions, mixins… You name it…</p> <p>Sass is also required to effectively use official <a href="https://material.angular.io/" target="_blank" rel="noopener noreferrer">Angular Material Components<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> library with it’s <a href="https://medium.com/@tomastrajan/the-complete-guide-to-angular-material-themes-4d165a9d24d1" target="_blank" rel="noopener noreferrer">extensive theming capabilities<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. It is safe to assume that using Sass it’s the default choice for most projects.</p> <p>To use Sass we have to generate our project using Angular CLI ng new command with --style scss flag. This sets up most of the necessary configuration. One thing which is not added by default is stylePreprocessorOptions with includePaths and we can set it up ourselves with mandatory root &quot;./&quot; and optional &quot;./themes&quot; values.</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
   apps<span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
         ...<span class="token operator">:</span><span class="token string">&quot;reduced for brevity&quot;</span><span class="token punctuation">,</span>
         stylePreprocessorOptions<span class="token operator">:</span><span class="token punctuation">{</span>
            includePaths<span class="token operator">:</span><span class="token punctuation">[</span>
               <span class="token string">&quot;./&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;./themes&quot;</span>
            <span class="token punctuation">]</span>
         <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This helps our editor to find imported symbols and enhances developer experience with code completion of Angular Material variables and utility functions.</p> <blockquote><p>When theming Angular Material apps it’s a good practice to extract theme definitions into separate themes folder, one theme per file.</p></blockquote> <h2 id="_4-the-“prod”-build"><a href="#_4-the-“prod”-build" aria-hidden="true" class="header-anchor">#</a> 4. The “PROD” build</h2> <p>Project generated by Angular CLI comes only with a very simple ng build script out of the box. To generate production grade artifacts we have to do a bit of customization ourselves.</p> <p>We add &quot;build:prod&quot;: &quot;ng build --target production --build-optimizer --vendor-chunk&quot; to our package.json scripts.</p> <h3 id="target-production"><a href="#target-production" aria-hidden="true" class="header-anchor">#</a> Target Production</h3> <p>This one is an umbrella flag which enables code minification and lot of <a href="https://github.com/angular/angular-cli/wiki/build#--dev-vs---prod-builds" target="_blank" rel="noopener noreferrer">useful build flags<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> by default. It is equivalent to using following…</p> <ul><li><p>--environment prod —use environment.prod.ts file for environment variables</p></li> <li><p>--aot — enable Ahead-of-Time compilation. This will become a default setting in future versions of Angular CLI but for now we have to enable this manually</p></li> <li><p>--output-hashing all — hash contents of the generated files and append hash to the file name to facilitate browser cache busting (any change to file content will result in different hash and hence browser is forced to load a new version of the file)</p></li> <li><p>--extract-css true — extract all the css into separate style-sheet file</p></li> <li><p>--sourcemaps false — disable generation of source maps</p></li> <li><p>--named-chunks false — disable using human readable names for chunk and use numbers instead</p></li></ul> <h3 id="other-useful-flags"><a href="#other-useful-flags" aria-hidden="true" class="header-anchor">#</a> Other useful flags</h3> <ul><li><p>--build-optimizer — new feature which results in smaller bundles but much longer build times so use with caution! (also should be enabled by default in the future)</p></li> <li><p>--vendor-chunk — extract all vendor (library) code into separate chunk</p></li></ul> <p>Also check <a href="https://github.com/angular/angular-cli/wiki/build" target="_blank" rel="noopener noreferrer">official docs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for other available configuration flags which might be useful in your individual project.</p> <h2 id="_5-phantom-js-is-dead-long-live-headless-chrome"><a href="#_5-phantom-js-is-dead-long-live-headless-chrome" aria-hidden="true" class="header-anchor">#</a> 5. Phantom JS is dead! Long live Headless Chrome!</h2> <p>PhantomJS is a very well known headless browser which was defacto <strong>THE SOLUTION</strong> for running frontend tests on CI servers and many dev machines.</p> <p>While being kinda OK, it’s support for modern ECMAScript features was lagging. More so, it’s non-standard behavior caused headache on many occasions when tests were passing locally without problem but they still broke the CI environment.</p> <p>Luckily, we don’t have to deal with it anymore!</p> <p><img src="https://cdn-images-1.medium.com/max/4000/1*OncczGezIgnggejIkqRjyA.jpeg" alt="Headless Chrome — The Frontend testing Renaissance has begun!"></p> <p>As the <a href="https://developers.google.com/web/updates/2017/04/headless-chrome" target="_blank" rel="noopener noreferrer">official documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> says…</p> <blockquote><p><a href="https://chromium.googlesource.com/chromium/src/+/lkgr/headless/README.md" target="_blank" rel="noopener noreferrer">Headless Chrome<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is shipping in Chrome 59. It’s a way to run the Chrome browser in a headless environment. Essentially, running Chrome without chrome! It brings <strong>all modern web platform features</strong> provided by Chromium and the Blink rendering engine to the command line.</p> <h1 id="great-so-how-can-we-use-it-in-our-angular-cli-project"><a href="#great-so-how-can-we-use-it-in-our-angular-cli-project" aria-hidden="true" class="header-anchor">#</a> Great! So how can we use it in our Angular CLI project?</h1></blockquote> <p>We add --browser ChromeHeadless flag to our test command so we end up with</p> <pre><code>&quot;test&quot;: &quot;ng test --browser ChromeHeadless --single-run&quot;
</code></pre> <p>and</p> <pre><code>&quot;watch&quot;: &quot;ng test --browser ChromeHeadless&quot;
</code></pre> <p>in our package.json scripts. Pretty simple, ha!</p> <br> <div class="tip custom-block"><p class="custom-block-title">BASED ON</p> <p><a href="https://medium.com/@tomastrajan/6-best-practices-pro-tips-for-angular-cli-better-developer-experience-7b328bc9db81" target="_blank" rel="noopener noreferrer"><code>6 Best Practices &amp; Pro Tips when using Angular CLI</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> article from Tomas Trajan on Medium</p></div></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/web-development-guidelines/assets/js/6.e9c321fb.js" defer></script><script src="/web-development-guidelines/assets/js/app.619e207b.js" defer></script>
  </body>
</html>
