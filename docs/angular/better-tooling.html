<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>How</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/web-development-guidelines/assets/css/0.styles.55b66cfc.css" as="style"><link rel="preload" href="/web-development-guidelines/assets/js/app.619e207b.js" as="script"><link rel="preload" href="/web-development-guidelines/assets/js/9.6392689b.js" as="script"><link rel="prefetch" href="/web-development-guidelines/assets/js/15.35f51890.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/2.cda51ec0.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/3.9f1531d6.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/4.87c874f8.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/5.dd094de2.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/6.e9c321fb.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/7.250c8d9d.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/8.348a10fe.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/10.bd1c58ab.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/11.d21adb37.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/12.3cd62bb9.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/13.b26b65b0.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/14.8faec2af.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/16.94cda7f5.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/17.0c7f3574.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/18.b59d2269.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/19.ade22912.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/20.3662ab7a.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/21.d8d39710.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/22.97a30b23.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/23.4c4f544d.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/24.64505df8.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/25.0dd8fbbb.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/26.be3c1b35.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/27.4ecc62cd.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/28.be69aaab.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/29.b3a0daa6.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/30.3e451a60.js"><link rel="prefetch" href="/web-development-guidelines/assets/js/31.f23344bd.js">
    <link rel="stylesheet" href="/web-development-guidelines/assets/css/0.styles.55b66cfc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/web-development-guidelines/" class="home-link router-link-active"></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!---->  <!----> </div> <div class="page"> <div class="content"><p><strong>How to leverage the best from React ecosystem and beyond to make our daily task easier and more effective within Angular apps and in the end become the best friends ever !</strong></p> <p>Question is where to start? or <strong>how</strong> to achieve that goal.</p> <h2 id="how"><a href="#how" aria-hidden="true" class="header-anchor">#</a> How</h2> <p>To answer the question ‚ÄúHow to leverage other ecosystems‚Äù we need to introduce and take a look at 3 categories that cover an integral part of software development:</p> <ul><li><p>Tools</p></li> <li><p>Architecture</p></li> <li><p>Libraries</p></li></ul> <blockquote><h1 id="as-a-baseline-we-will-use-‚Äúindustry-standard‚Äù-for-booting-up-new-angular-apps-‚Äî-angular-cli"><a href="#as-a-baseline-we-will-use-‚Äúindustry-standard‚Äù-for-booting-up-new-angular-apps-‚Äî-angular-cli" aria-hidden="true" class="header-anchor">#</a> As a baseline we will use ‚ÄúIndustry standard‚Äù for booting up new Angular apps ‚Äî Angular CLI</h1></blockquote> <p><img src="https://cdn-images-1.medium.com/max/2000/1*J_Y3KKxV3f6nP8vyORjw6w.png" alt="Angular CLI, industry standard for booting up Angular apps"></p> <p>We can boot new Angular app in matter of seconds, with all ‚Äúrecommended/required tooling and setup‚Äù, by executing simple command:</p> <pre><code>npx @angular/cli new my-app
</code></pre> <blockquote><p><strong>NOTE:</strong>* never use a -g flag when installing packages! Global things are bad for your machine/life and thanks to <strong>npx</strong>, you don't need them anyway üòÉ*</p></blockquote> <p>Let‚Äôs take a look what CLI gives us by default from perspective of our 3 defined categories:</p> <ul><li><p><strong>Libraries:</strong> all @angular/* packages and RxJs</p></li> <li><p><strong>Architecture:</strong> Component driven architecture with Service layer, but no restrictions on this front ( use what you want )</p></li> <li><p><strong>Tools:</strong></p></li></ul> <p>‚Üí we‚Äôve got webpack as a module bundler</p> <p>‚Üí Protractor/Selenium for e2e testing</p> <p>‚Üí Jasmine with Karma for unit testing</p> <p>‚Üí and last but not least, <em><strong>the best thing that ever happened to JavaScript ‚Äî Typescript</strong></em> with solid static analysis extensions for adhering to proper style-guides and ‚Äî TSLint and Codelyzer.</p> <p><img src="https://cdn-images-1.medium.com/max/5040/1*-Tc8D8wgf3dqCiahV-0OOg.png" alt="Angular CLI defaults from our 3 categories perspective"></p> <p>So far so good right ?!</p> <h2 id="tools"><a href="#tools" aria-hidden="true" class="header-anchor">#</a> Tools</h2> <p>Tooling is indeed crucial for our productivity. Let‚Äôs see what can be done on this front.</p> <p>Let‚Äôs start with package manager‚Ä¶</p> <h2 id="package-manager-task-runner"><a href="#package-manager-task-runner" aria-hidden="true" class="header-anchor">#</a> Package Manager/Task Runner</h2> <p>Most of you are probably using npm, which was super annoying to use and slow until version 5. While npm is constantly improving, you don‚Äôt have to wait and instead you can switch to a better tool -&gt; <a href="https://yarnpkg.com/en/" target="_blank" rel="noopener noreferrer">yarn<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>I‚Äôm not going to enumerate all the benefits, just a few time savers that you can leverage on daily basis.</p> <p>How would you execute locally installed TypeScript from CLI with npm, or execute custom npm-script or pass additional arguments to your custom npm-script ? You‚Äôre smart and sure know how to do those, but with yarn it‚Äôs much easier. Comparison is on following image:</p> <p><img src="https://cdn-images-1.medium.com/max/2932/0*Ubpcib5fnNg-JUB2.png" alt="npm vs yarn ( from task runner perspective )"></p> <p>How are you bumping you dependencies ? Manually by hand ? Seriously ? We can do better with yarn:</p> <p><img src="https://cdn-images-1.medium.com/max/2000/0*gf4wYljVyt5vfg0k.gif" alt="yarn upgrade-interactive"></p> <blockquote><p><em>Just to not be biased against npm, you can achieve the same via 3rd party package(<em><strong>npm-check</strong></em>) and <em><strong>npx</strong></em> via npx npm-check -u just sayin‚Äô...</em></p></blockquote> <h2 id="formatting"><a href="#formatting" aria-hidden="true" class="header-anchor">#</a> Formatting</h2> <p>CLI comes with pre-configured TSLint supported by Codelyzer, which helps us lint our code and adhere to strictly set style guides within our project. TSLint takes also care of consistent spaces at various places ( functions, module imports, etc‚Ä¶ ), empty lines, single/double quotes, semicolons/no-semicolons‚Ä¶ But if you think that this is the right way to do formatting, you are fundamentally wrong. Anyway, Lint is for linting not for formatting !</p> <p>So how can we efficiently/consistently format our codebase instead of using wrong tool for that job ‚Äî yes I‚Äôm talking about you Mr. linter(TSlint) ?</p> <p>Ladies and gentleman, please welcome, The humble Prettier!</p> <p><img src="https://cdn-images-1.medium.com/max/2000/0*yXh_vSp-J4ZSXsFA." alt></p> <h3 id="prettier"><a href="#prettier" aria-hidden="true" class="header-anchor">#</a> <a href="https://prettier.io/" target="_blank" rel="noopener noreferrer">Prettier<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>is an opinionated formatter created by Facebook and OSS community. You can read more about it on prettier website.</p> <p>We can add it to our CLI very easily:</p> <p><em>Install:</em></p> <pre><code>yarn add -D prettier
</code></pre> <p>and define a new npm script:</p> <pre><code>{
  &quot;scripts&quot;: {
    &quot;format&quot;: &quot;prettier {src/e2e}/**/* --write&quot;
  }
}
</code></pre> <p>By executing yarn format our whole codebase is formatted in matter of seconds and it's super fast!</p> <p>That‚Äôs it? Not entirely! Because TSlint contains formatting rules, which has nothing to do with linting, we need to turn off these rules‚Ä¶ Uff looks like lot of manual work !</p> <h3 id="tslint-config-prettier"><a href="#tslint-config-prettier" aria-hidden="true" class="header-anchor">#</a> tslint-config-prettier</h3> <p>Thanks to OSS we can leverage <a href="https://github.com/alexjoverm/tslint-config-prettier" target="_blank" rel="noopener noreferrer">tslint-config-prettier<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> package, which handles everything for us!</p> <p><em>Install:</em></p> <pre><code>yarn add -D tslint-config-prettier
</code></pre> <p>and extend tslint.json rules with it:</p> <pre><code>{
  &quot;extends&quot;: [
    &quot;tslint-config-prettier&quot;
  ],
  &quot;rulesDirectory&quot;: [
    &quot;node_modules/codelyzer&quot;
  ],
  &quot;rules&quot;: {...}
}
</code></pre> <p>There are still issues though. CLI defines lot‚Äôs of rules within tslint.json which are overriding anything that extends our config. Again, tslint-config-prettier comes with a handy CLI tool, that detects those rules in conflict, which need to be removed:</p> <p>By executing local binary:</p> <pre><code>yarn tslint-config-prettier-check ./tslint.json
</code></pre> <p>We will get output like this:</p> <p><img src="https://cdn-images-1.medium.com/max/2024/0*eJwwtii1QqKZed6T.png" alt="tslint-config-prettier-check output"></p> <blockquote><h1 id="i-see-a-great-pr-opportunity-here-to-automate-removal-of-those-conflicting-lint-rules"><a href="#i-see-a-great-pr-opportunity-here-to-automate-removal-of-those-conflicting-lint-rules" aria-hidden="true" class="header-anchor">#</a> I see a great PR opportunity here, to automate removal of those conflicting lint rules üòâ</h1></blockquote> <h3 id="tslint-config-airbnb"><a href="#tslint-config-airbnb" aria-hidden="true" class="header-anchor">#</a> tslint-config-airbnb</h3> <p>You can also install <a href="https://github.com/progre/tslint-config-airbnb" target="_blank" rel="noopener noreferrer">tslint-config-airbnb<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to import Airbnb JavaScript Style rules</p> <p><em>Install:</em></p> <pre><code>yarn add -D tslint-config-airbnb
</code></pre> <p>and extend tslint.json rules with it:</p> <pre><code>{
  &quot;extends&quot;: [
    &quot;tslint-config-airbnb&quot;
  ],
  &quot;rulesDirectory&quot;: [
    &quot;node_modules/codelyzer&quot;
  ],
  &quot;rules&quot;: {...}
}
</code></pre> <p>Formatting/Linting Done!</p> <p>There is room for improvement though! I don‚Äôt know about you, but I‚Äôm lazy and just the thought of manually executing former command to format/lint my code, makes me ill‚Ä¶</p> <h3 id="hey-robot-do-your-work"><a href="#hey-robot-do-your-work" aria-hidden="true" class="header-anchor">#</a> Hey Robot! Do your work!</h3> <p><img src="https://cdn-images-1.medium.com/max/2000/1*v-04n2SFVT0nZD7onCCEzg.png" alt></p> <p>Robots (I mean npm packages) can handle that for us. This can be achieved with following node libraries:</p> <ul><li><p><a href="https://github.com/okonet/lint-staged" target="_blank" rel="noopener noreferrer">lint-staged<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> üö´üí© ‚Äî Run linters/formatters on git staged files</p></li> <li><p><a href="https://github.com/typicode/husky" target="_blank" rel="noopener noreferrer">husky<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> üê∂ Git hooks made easy</p></li></ul> <p><em>Install:</em></p> <pre><code>yarn add -D lint-staged husky
</code></pre> <p><em>Configure</em> lint-staged:</p> <p><img src="https://cdn-images-1.medium.com/max/2152/0*K5LaiFUz79bPx6Cs.png" alt="lint-staged config within package.json"></p> <p>And add commit hook via custom npm script, which will be recognised by husky and executed on particular git-hook. In our case, we want to hook into pre-commit git life cycle and execute lint-staged binary which will consume our formerly defined configuration.</p> <p>npm script, which will be executed by husky, looks like following:</p> <pre><code>{
  &quot;scripts&quot;: {
    &quot;precommit&quot;: &quot;lint-staged&quot;
  }
}
</code></pre> <p>Now, every time we will commit to the repo, our staged files will be formatted and linting violations will be fixed by TSLint (if they are auto-fixable), otherwise our commit will fail !</p> <blockquote><h1 id="excellent-you-will-never-ever-have-to-argue-with-your-pr-reviewer-about-semicolons-vs-no-semicolons-spaces‚Ä¶you-name-it‚Ä¶üëå"><a href="#excellent-you-will-never-ever-have-to-argue-with-your-pr-reviewer-about-semicolons-vs-no-semicolons-spaces‚Ä¶you-name-it‚Ä¶üëå" aria-hidden="true" class="header-anchor">#</a> Excellent, you will never ever have to argue with your PR reviewer about semicolons vs no-semicolons, spaces‚Ä¶you name it‚Ä¶üëå.</h1></blockquote> <p>With that said, let‚Äôs switch to more serious stuff‚Ä¶</p> <h2 id="unit-testing"><a href="#unit-testing" aria-hidden="true" class="header-anchor">#</a> Unit Testing</h2> <blockquote><p><em>If you‚Äôre not testing your codebase I will find you and I will‚Ä¶ üòÑ</em></p></blockquote> <p>Angular CLI comes with Karma test runner and Jasmine expectation/spy library. Those tests are run usually against browser.</p> <p>Karma is indeed an old tool ( levorutionary at one point some years ago ) but let‚Äôs be honest, it‚Äôs slow, debugging test is cumbersome and it needs extensive configuration. We can look outside our Angular boundaries and we will discover the ‚Äúultimate salvation‚Äù.</p> <p>Everyone please welcome, silver bullet to all our testing nightmares, Dr.Jest .</p> <h3 id="jest"><a href="#jest" aria-hidden="true" class="header-anchor">#</a> <a href="https://facebook.github.io/jest/" target="_blank" rel="noopener noreferrer">Jest<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p><img src="https://cdn-images-1.medium.com/max/2000/0*Jw3W_RvNW5rg-13i.png" alt></p> <p>Jest is a complete testing solution, that includes both test runner and assertion/spy library and much more‚Ä¶</p> <p>It‚Äôs super easy to setup, it‚Äôs blazingly fast and introduces a brand new type of testing ‚Äî snapshot testing ( which can be leveraged with everything that is serializable ‚Äî component snapshots, state snapshots, image snapshots ‚Ä¶)</p> <p><strong>Jest integration with Angular CLI</strong></p> <p>To integrate Jest with Angular CLI, we need to install</p> <ul><li><p><strong>jest</strong></p></li> <li><p><a href="https://github.com/thymikee/jest-preset-angular" target="_blank" rel="noopener noreferrer">**jest-preset-angular<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>**, which handles everything for test environment setup specific to Angular ( zones and stuff ya know ? )</p> <p>yarn add -D jest jest-preset-angular</p></li></ul> <p>Now we need to configure jest, to consume our preset:</p> <pre><code>// jest.config.js
module.exports = {
  preset: 'jest-preset-angular',
  setupTestFrameworkScriptFile: '&lt;rootDir&gt;/src/setupJest.ts',
}
</code></pre> <blockquote><p><a href="https://github.com/thymikee/jest-preset-angular#exposed-configuration" target="_blank" rel="noopener noreferrer">*For more info see the docs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>*</p></blockquote> <p>Now we can add new npm-scripts for testing:</p> <pre><code>{
  &quot;scripts&quot;: {
    &quot;test&quot;: &quot;jest --watch&quot;,
    &quot;test:ci&quot;: &quot;jest --runInBand&quot;,
    &quot;test:coverage&quot;: &quot;jest --coverage&quot;
  }
}
</code></pre> <h3 id="jest-speed"><a href="#jest-speed" aria-hidden="true" class="header-anchor">#</a> Jest speed</h3> <p>I briefly mentioned, that Jest is fast. How fast ?</p> <p><img src="https://cdn-images-1.medium.com/max/3336/0*s9xWHdUAHYgIeS7X.png" alt="Unit testing speed comparison Karma vs Jest"></p> <p>Why is it so fast ? Well it runs against Node and <a href="https://github.com/jsdom/jsdom" target="_blank" rel="noopener noreferrer">JSDOM<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, tests are executed in parallel and efficiently cached.</p> <h3 id="jest-snapshot-testing"><a href="#jest-snapshot-testing" aria-hidden="true" class="header-anchor">#</a> Jest snapshot testing</h3> <p>Jest comes with snapshot testing, you just need to use toMatchSnapshot matcher within your test expectation on component fixture:</p> <p><img src="https://cdn-images-1.medium.com/max/2000/0*mUxioxAmdcEoJGV6.png" alt="Component snapshot testing"></p> <p>This will save a snapshot footprint of your component in that particular moment(state) - a file physically on disk - and when something changes in the component implementation afterwards, you‚Äôll get following failing test with detailed DIFF about what changed:</p> <p><img src="https://cdn-images-1.medium.com/max/2720/0*wKJPhBGc_EcxwmM1.png" alt="Component snapshot diff change"></p> <p>I love this !</p> <h3 id="jest-interactive-mode"><a href="#jest-interactive-mode" aria-hidden="true" class="header-anchor">#</a> Jest interactive mode</h3> <p>Jest comes with advanced watch mode ‚Äî a CLI like tool with lot of perks, like filtering, running only tests that changed and various other features:</p> <blockquote><h1 id="behold-‚Äî-jest-interactive-watch-mode"><a href="#behold-‚Äî-jest-interactive-watch-mode" aria-hidden="true" class="header-anchor">#</a> Behold ‚Äî Jest interactive watch mode:</h1></blockquote> <p><img src="https://cdn-images-1.medium.com/max/2078/0*FP7v9M4YqyKu4tSi.gif" alt></p> <p>Beautiful isn‚Äôt it ?!</p> <h3 id="other-jest-features"><a href="#other-jest-features" aria-hidden="true" class="header-anchor">#</a> <strong>Other Jest features</strong></h3> <p>There are moar things that comes with Jest, I will name just few:</p> <ul><li><p>Powerful mocking features ( ES2015 modules, assets )</p></li> <li><p>Code coverage ‚Äî 0CJS jest --coverage</p></li> <li><p>Pluggable ( run Puppeteer with Jest )</p></li> <li><p>Huge ecosystem: <a href="https://github.com/nickcolley/jest-axe" target="_blank" rel="noopener noreferrer">jest-axe<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ( a11y ), <a href="https://github.com/americanexpress/jest-image-snapshot" target="_blank" rel="noopener noreferrer">jest-images-snapshots<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li></ul> <h2 id="e2e-testing"><a href="#e2e-testing" aria-hidden="true" class="header-anchor">#</a> E2E Testing</h2> <p>End to End testing is equally or even more important than unit testing. Let‚Äôs see what we get by default with CLI.</p> <ul><li>Protractor with Selenium</li></ul> <p>Uh?! What did you just say? SELENIUM ? Did I tell you that every time I hear ‚ÄúSELENIUM‚Äù I wanna fight someone‚Ä¶ and you don‚Äôt want to fight me, trust me üëÄüòá</p> <blockquote><h1 id="selenium-was-indeed-useful-at-some-point-in-our-development-carer-history-but-it‚Äôs-2018-and-there-are-much-better-tools-out-there-nowadays"><a href="#selenium-was-indeed-useful-at-some-point-in-our-development-carer-history-but-it‚Äôs-2018-and-there-are-much-better-tools-out-there-nowadays" aria-hidden="true" class="header-anchor">#</a> Selenium was indeed useful at some point in our development carer history, but it‚Äôs 2018 and there are much better tools out there nowadays.</h1></blockquote> <p>Please welcome, the cure for your E2E testing sickness, Dr. TestCafe üë®‚Äç‚öïÔ∏è</p> <h3 id="testcafe"><a href="#testcafe" aria-hidden="true" class="header-anchor">#</a> <a href="https://devexpress.github.io/testcafe/" target="_blank" rel="noopener noreferrer">TestCafe<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>TestCafe is pure NodeJS, non framework specific, open source tool for all our E2E scenario needs !</p> <p>It‚Äôs 100% reliable, fast, zero config solution, works cross platform, cross browser( even works on custom environments like Windows Subsystem Linux or custom browsers ). Last but not least I forgot to mention that Typescript is 1st class citizen for writing e2e scenarios, so yay for type safety within your E2E tests!</p> <p><em>Install:</em></p> <pre><code>yarn add -D testcafe testcafe-live
</code></pre> <p>Now we can add new npm-scripts for executin e2e tests:</p> <p><img src="https://cdn-images-1.medium.com/max/3468/1*3GO2vo3uwbznspgJ-_vxUQ.png" alt="npm scripts for running e2e with TestCafe"></p> <p>On CI, we wanna run our suite against all browsers and by providing --app flag, we are telling TestCafe to boot UI for us and then execute the scenarios on it, so for those purposes we will execute yarn e2e:ci</p> <p>For development we will use yarn e2e which runs e2e tests in watch mode in chrome, so after every change our tests are re-run. <em><strong>DX experience at it's best !</strong></em></p> <blockquote><h1 id="let‚Äôs-see-it-in-action-testcafe-watch-mode"><a href="#let‚Äôs-see-it-in-action-testcafe-watch-mode" aria-hidden="true" class="header-anchor">#</a> Let‚Äôs see it in action (TestCafe watch mode)!</h1></blockquote> <p><strong>TestCafe demo example</strong></p> <p>In following e2e scenario, we are testing creation of new pizza, and after it‚Äôs created, we delete it to clean up after ourselves.</p> <p>What might not be visible from the demo is, that when you wanna delete a pizza, browser native confirm dialog is shown, TestCafe handles all of this with ease.</p> <p>After initial run, we‚Äôre adding toppings to the pizza, just to showcase complex UI entities selection within our e2e test.</p> <p>Whole test scenario is powered by traditional <em><strong>PageObject pattern</strong></em> with custom helpers for our particular needs.</p> <p><img src="https://cdn-images-1.medium.com/max/2936/1*6zjG9GvkvC_FgkTH4mFcXg.gif" alt="E2E tests run in watch mode ‚Äî brilliant DX for writing our scenarios"></p> <h2 id="components-development"><a href="#components-development" aria-hidden="true" class="header-anchor">#</a> Components Development</h2> <p>Angular CLI doesn‚Äôt come with anything related to developing Components in isolation or for building a Demo project with components showcased in various state. Thanks to React community we can leverage <a href="https://github.com/storybooks/storybook" target="_blank" rel="noopener noreferrer">Storybook<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> !</p> <h3 id="storybook"><a href="#storybook" aria-hidden="true" class="header-anchor">#</a> Storybook</h3> <p>Storybook is powered by React under the hood and generates whole UI catalogue of your component demos/stories. Within Angular scope, it supports much more than just components. You can write stories for Services, Modules etc‚Ä¶</p> <p>This is how the Storybook UI looks like:</p> <p><img src="https://cdn-images-1.medium.com/max/2616/0*vSI1f8FXaX59sJm0.gif" alt="Storybook UI with Angular"></p> <p>Storybook is also capable to build our stories app, so we can deploy it on server, and with that, to provide a documentation for our component consumers. You can see it deployed with various <a href="https://storybooks-angular.netlify.com/" target="_blank" rel="noopener noreferrer">Angular stories examples here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>Storybook CLI integration</strong></p> <p>To add Storybook to Angular CLI, we will leverage storybook CLI:</p> <pre><code>npx @storybook/cli@alpha getstorybook
</code></pre> <blockquote><h1 id="while-we-are-enjoying-our-morning-quick-shot-of-espresso-everything-is-setup-for-us-amazing"><a href="#while-we-are-enjoying-our-morning-quick-shot-of-espresso-everything-is-setup-for-us-amazing" aria-hidden="true" class="header-anchor">#</a> While we are enjoying our morning quick shot of espresso, everything is setup for us. Amazing!</h1></blockquote> <p><img src="https://cdn-images-1.medium.com/max/2000/0*kWuHmkpgmg-4oaF3.gif" alt="add storybook to angular CLI"></p> <p>Then we execute</p> <pre><code>yarn storybook
</code></pre> <p>and our local storybook app is ready to use!</p> <p><strong>Storybook Addons</strong></p> <p>Storybook comes also with various plugins, although framework support varies. <a href="https://github.com/storybooks/storybook/blob/master/ADDONS_SUPPORT.md" target="_blank" rel="noopener noreferrer">You can learn more here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>Storybook: write a story</strong></p> <p>Let‚Äôs look very quickly how to write a story for simple button component:</p> <p><img src="https://cdn-images-1.medium.com/max/2000/0*Or8BNN3fp09DE4P4.png" alt="Angular Componet Story"></p> <p><strong>Storybook: Component folder structure</strong></p> <p>With storybook covered, our final component folder structure should look like this:</p> <p><img src="https://cdn-images-1.medium.com/max/3464/0*wPasNwJBGDRReJbo.png" alt="Final folder structure"></p> <ul><li><p>implementation</p></li> <li><p>unit test with snapshots</p></li> <li><p>external styles</p></li> <li><p>story</p></li></ul> <h2 id="tooling-summary"><a href="#tooling-summary" aria-hidden="true" class="header-anchor">#</a> Tooling summary</h2> <p>Thanks to other communities and ecosystems, we are able to leverage better exisitng tools for our Angular toolkit.</p> <p>We replaced Karma/Jasmine with Jest, Protractor/Selenium with TestCafe, TSlint with Prettier for formatting and added husky with lint-staged for adhering to styleguides automatically. As a last step, we added Storybook for developing components in isolation.</p> <p><img src="https://cdn-images-1.medium.com/max/3288/0*xJ19FPB-G50-tlBb.png" alt></p> <p>You can find everything that I‚Äôve covered in this article open sourced on my GitHub repo:</p> <ul><li><p><a href="https://github.com/Hotell/react-tools-for-better-angular-apps" target="_blank" rel="noopener noreferrer">Better Angular CLI defaults<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p><a href="https://github.com/Hotell/react-tools-for-better-angular-apps/tree/example-app" target="_blank" rel="noopener noreferrer">Example app<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li></ul> <br> <div class="tip custom-block"><p class="custom-block-title">BASED ON</p> <p><a href="https://medium.com/@martin_hotell/use-react-tools-for-better-angular-apps-b0f14f3f8114" target="_blank" rel="noopener noreferrer"><code>Use React tools for better Angular apps</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> article from Martin Hochel on Medium</p></div></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/web-development-guidelines/assets/js/9.6392689b.js" defer></script><script src="/web-development-guidelines/assets/js/app.619e207b.js" defer></script>
  </body>
</html>
