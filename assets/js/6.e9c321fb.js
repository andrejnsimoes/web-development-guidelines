(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{187:function(t,e,s){"use strict";s.r(e);var a=s(0),n=Object(a.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[s("p",[t._v("Developing Angular apps with "),s("a",{attrs:{href:"https://www.sitepoint.com/ultimate-angular-cli-reference/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Angular CLI"),s("OutboundLink")],1),t._v(" is a very pleasurable experience! Angular team provided us with amazing CLI which supports most of the things which are needed for any serious project out of the box.")]),t._v(" "),s("p",[t._v("Standardized project structure with full testing capabilities (both unit and e2e testing), code scaffolding, production grade build with support for using environment specific configuration. That‚Äôs a dream come true and lots of saved hours on every new projects. Thank you Angular team! üíñ")]),t._v(" "),s("p",[t._v("While Angular CLI works great from the get go, there are some potential configuration improvements and best practices we can utilize to make our projects even better!")]),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),s("p",[t._v("A good guideline to follow is to split our application into at least three different modules ‚Äî Core, Shared and Feature (we will probably need more than one feature module thoughüòâ).")]),t._v(" "),t._m(4),t._v(" "),s("p",[t._v("All services which have to have one and only one instance per application (singleton services) should be implemented here. Typical example can be authentication service or user service. Let‚Äôs look at an example of CoreModule implementation.")]),t._v(" "),t._m(5),t._m(6),t._v(" "),s("p",[t._v("All the ‚Äúdumb‚Äù components and pipes should be implemented here. These components don‚Äôt import and inject services from core or other features in their constructors. They should receive all data though attributes in the template of the component using them. This all sums up to the fact that SharedModule doesn‚Äôt have any dependency to the rest of our application.")]),t._v(" "),s("p",[t._v("It is also the perfect place to import and re-export Angular Material components.")]),t._v(" "),t._m(7),t._m(8),t._v(" "),s("p",[t._v("We can generate Core and Shared modules right after the creation of our new project. That way, we will be prepared for generation of additional components and services right from the start.")]),t._v(" "),s("p",[t._v("Run ng generate module core. Then create index.ts file in the core folder and re-export the CoreModule itself. We will be re-exporting additional public services which should be available in the whole application during further development.")]),t._v(" "),s("p",[t._v("That being done, we can do the same for shared module.")]),t._v(" "),t._m(9),t._v(" "),s("p",[t._v("We are going to create multiple feature modules for every independent feature of our application. Feature modules should only import services from CoreModule. If feature module A needs to import service from feature module B consider moving that service into core.")]),t._v(" "),t._m(10),t._v(" "),s("p",[t._v("This will keep our code clean, easy to maintain and extend with new features. It also reduces effort needed for refactoring. If followed properly, we will be confident that changes to one feature can‚Äôt affect or break the rest of our application.")]),t._v(" "),t._m(11),t._v(" "),s("p",[t._v("We should lazy load our feature modules whenever possible. Theoretically only one feature module should be loaded synchronously during the app startup to show initial content. Every other feature module should be loaded lazily after user triggered navigation.")]),t._v(" "),t._m(12),t._v(" "),s("p",[t._v("Aliasing our app and environments folders will enable us to implement clean imports which will be consistent throughout our application.")]),t._v(" "),s("p",[t._v("Consider hypothetical, but usual situation. We are working on a component which is located three folders deep in a feature A and we want to import service from the core which is located two folders deep. This would lead to import statement looking something like import { SomeService } from '../../../core/subpackage1/subpackage2/some.service'.")]),t._v(" "),t._m(13),t._v(" "),s("p",[t._v('And what is even worse, any time we want to change location of any of those two files our import statement will break. Compare that to much shorter import { SomeService } from "@app/core". Looks better, doesn‚Äôt it?')]),t._v(" "),s("p",[t._v("To be able to use aliases we have to add baseUrl and paths properties to our tsconfig.json file like this‚Ä¶")]),t._v(" "),t._m(14),t._m(15),t._v(" "),s("p",[t._v("With our paths in place we can now import environment and services like this‚Ä¶")]),t._v(" "),t._m(16),t._m(17),t._v(" "),t._m(18),s("p",[t._v("In most apps components and services of particular feature module will usually only have to have access to services from the CoreModule and components from SharedModule. Sometimes this might not be enough to solve particular business case and we will also need some kind of ‚Äúshared feature module‚Äù which is providing functionality for a limited subset of other feature modules.")]),t._v(" "),t._m(19),t._v(" "),t._m(20),t._v(" "),t._m(21),t._v(" "),s("p",[t._v("Sass is a styles preprocessor which brings support for fancy things like variables (even though css will get variables soon too), functions, mixins‚Ä¶ You name it‚Ä¶")]),t._v(" "),s("p",[t._v("Sass is also required to effectively use official "),s("a",{attrs:{href:"https://material.angular.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Angular Material Components"),s("OutboundLink")],1),t._v(" library with it‚Äôs "),s("a",{attrs:{href:"https://medium.com/@tomastrajan/the-complete-guide-to-angular-material-themes-4d165a9d24d1",target:"_blank",rel:"noopener noreferrer"}},[t._v("extensive theming capabilities"),s("OutboundLink")],1),t._v(". It is safe to assume that using Sass it‚Äôs the default choice for most projects.")]),t._v(" "),s("p",[t._v('To use Sass we have to generate our project using Angular CLI ng new command with --style scss flag. This sets up most of the necessary configuration. One thing which is not added by default is stylePreprocessorOptions with includePaths and we can set it up ourselves with mandatory root "./" and optional "./themes" values.')]),t._v(" "),t._m(22),s("p",[t._v("This helps our editor to find imported symbols and enhances developer experience with code completion of Angular Material variables and utility functions.")]),t._v(" "),t._m(23),t._v(" "),t._m(24),t._v(" "),s("p",[t._v("Project generated by Angular CLI comes only with a very simple ng build script out of the box. To generate production grade artifacts we have to do a bit of customization ourselves.")]),t._v(" "),s("p",[t._v('We add "build:prod": "ng build --target production --build-optimizer --vendor-chunk" to our package.json scripts.')]),t._v(" "),t._m(25),t._v(" "),s("p",[t._v("This one is an umbrella flag which enables code minification and lot of "),s("a",{attrs:{href:"https://github.com/angular/angular-cli/wiki/build#--dev-vs---prod-builds",target:"_blank",rel:"noopener noreferrer"}},[t._v("useful build flags"),s("OutboundLink")],1),t._v(" by default. It is equivalent to using following‚Ä¶")]),t._v(" "),t._m(26),t._v(" "),t._m(27),t._v(" "),t._m(28),t._v(" "),s("p",[t._v("Also check "),s("a",{attrs:{href:"https://github.com/angular/angular-cli/wiki/build",target:"_blank",rel:"noopener noreferrer"}},[t._v("official docs"),s("OutboundLink")],1),t._v(" for other available configuration flags which might be useful in your individual project.")]),t._v(" "),t._m(29),t._v(" "),t._m(30),t._v(" "),s("p",[t._v("While being kinda OK, it‚Äôs support for modern ECMAScript features was lagging. More so, it‚Äôs non-standard behavior caused headache on many occasions when tests were passing locally without problem but they still broke the CI environment.")]),t._v(" "),s("p",[t._v("Luckily, we don‚Äôt have to deal with it anymore!")]),t._v(" "),t._m(31),t._v(" "),s("p",[t._v("As the "),s("a",{attrs:{href:"https://developers.google.com/web/updates/2017/04/headless-chrome",target:"_blank",rel:"noopener noreferrer"}},[t._v("official documentation"),s("OutboundLink")],1),t._v(" says‚Ä¶")]),t._v(" "),s("blockquote",[s("p",[s("a",{attrs:{href:"https://chromium.googlesource.com/chromium/src/+/lkgr/headless/README.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("Headless Chrome"),s("OutboundLink")],1),t._v(" is shipping in Chrome 59. It‚Äôs a way to run the Chrome browser in a headless environment. Essentially, running Chrome without chrome! It brings "),s("strong",[t._v("all modern web platform features")]),t._v(" provided by Chromium and the Blink rendering engine to the command line.")]),t._v(" "),t._m(32)]),t._v(" "),s("p",[t._v("We add --browser ChromeHeadless flag to our test command so we end up with")]),t._v(" "),t._m(33),t._v(" "),s("p",[t._v("and")]),t._v(" "),t._m(34),t._v(" "),s("p",[t._v("in our package.json scripts. Pretty simple, ha!")]),t._v(" "),s("br"),t._v(" "),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[t._v("BASED ON")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://medium.com/@tomastrajan/6-best-practices-pro-tips-for-angular-cli-better-developer-experience-7b328bc9db81",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("6 Best Practices & Pro Tips when using Angular CLI")]),s("OutboundLink")],1),t._v(" article from Tomas Trajan on Medium")])])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"what-are-we-going-to-learn"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#what-are-we-going-to-learn","aria-hidden":"true"}},[this._v("#")]),this._v(" What are we going to learn")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ol",[s("li",[s("p",[t._v("Best practices for architecture with "),s("strong",[t._v("Core")]),t._v(", "),s("strong",[t._v("Shared")]),t._v(" and lazy-loaded "),s("strong",[t._v("Feature")]),t._v(" modules")])]),t._v(" "),s("li",[s("p",[t._v("Using "),s("strong",[t._v("aliases")]),t._v(" for app and environments folders to support cleaner imports")])]),t._v(" "),s("li",[s("p",[t._v("Why and how to use "),s("strong",[t._v("Sass")]),t._v(" and Angular Material")])]),t._v(" "),s("li",[s("p",[t._v("How to setup good "),s("strong",[t._v("production")]),t._v(" build")])]),t._v(" "),s("li",[s("p",[t._v("How to wave PhantomJS goodbye and use "),s("strong",[t._v("Headless Chrome")]),t._v(" instead (testing)")])]),t._v(" "),s("li",[s("p",[t._v("How to release our project with automatically generated "),s("strong",[t._v("changelog")]),t._v(" and correct version bump")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_1-a-bit-of-architecture"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-a-bit-of-architecture","aria-hidden":"true"}},[this._v("#")]),this._v(" 1. A bit of architecture")])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("h1",{attrs:{id:"ok-so-we-generated-our-new-fresh-project-using-angular-cli-but-what-now-should-we-just-keep-generating-our-services-and-components-into-some-random-folders-how-do-we-structure-our-project"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ok-so-we-generated-our-new-fresh-project-using-angular-cli-but-what-now-should-we-just-keep-generating-our-services-and-components-into-some-random-folders-how-do-we-structure-our-project","aria-hidden":"true"}},[this._v("#")]),this._v(" OK, so we generated our new fresh project using Angular CLI but what now? Should we just keep generating our services and components into some random folders. How do we structure our project?")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"coremodule"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#coremodule","aria-hidden":"true"}},[this._v("#")]),this._v(" CoreModule")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("/* 3rd party libraries */")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" NgModule"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Optional"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" SkipSelf "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'@angular/core'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" CommonModule "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'@angular/common'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" HttpClientModule "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'@angular/common/http'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("/* our own custom services  */")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" SomeSingletonService "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'./some-singleton/some-singleton.service'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n@"),s("span",{attrs:{class:"token function"}},[t._v("NgModule")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  imports"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{attrs:{class:"token comment"}},[t._v("/* 3rd party libraries */")]),t._v("\n    CommonModule"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    HttpClientModule"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  declarations"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  providers"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{attrs:{class:"token comment"}},[t._v("/* our own custom services  */")]),t._v("\n    SomeSingletonService\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("CoreModule")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{attrs:{class:"token comment"}},[t._v("/* make sure CoreModule is imported only by one NgModule the AppModule */")]),t._v("\n  "),s("span",{attrs:{class:"token function"}},[t._v("constructor")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    @"),s("span",{attrs:{class:"token function"}},[t._v("Optional")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" @"),s("span",{attrs:{class:"token function"}},[t._v("SkipSelf")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" parentModule"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" CoreModule\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("parentModule"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("Error")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'CoreModule is already loaded. Import only in AppModule'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"sharedmodule"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sharedmodule","aria-hidden":"true"}},[this._v("#")]),this._v(" SharedModule")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("/* 3rd party libraries */")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" NgModule "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'@angular/core'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" CommonModule "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'@angular/common'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" FormsModule  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'@angular/forms'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" MdButtonModule "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'@angular/material'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("/* our own custom components */")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" SomeCustomComponent "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'./some-custom/some-custom.component'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n@"),s("span",{attrs:{class:"token function"}},[t._v("NgModule")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  imports"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{attrs:{class:"token comment"}},[t._v("/* angular stuff */")]),t._v("\n    CommonModule"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    FormsModule"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n    "),s("span",{attrs:{class:"token comment"}},[t._v("/* 3rd party components */")]),t._v("\n    MdButtonModule"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  declarations"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    SomeCustomComponent\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  exports"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{attrs:{class:"token comment"}},[t._v("/* angular stuff */")]),t._v("\n    CommonModule"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    FormsModule"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n    "),s("span",{attrs:{class:"token comment"}},[t._v("/* 3rd party components */")]),t._v("\n    MdButtonModule"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n    "),s("span",{attrs:{class:"token comment"}},[t._v("/* our own custom components */")]),t._v("\n    SomeCustomComponent\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("SharedModule")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"how-to-prepare-project-structure-using-angular-cli"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#how-to-prepare-project-structure-using-angular-cli","aria-hidden":"true"}},[this._v("#")]),this._v(" How to prepare project structure using Angular CLI")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"featuremodule"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#featuremodule","aria-hidden":"true"}},[this._v("#")]),this._v(" FeatureModule")])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("In some cases there is a need for services which are shared only by some features and it wouldn‚Äôt make much sense to move them into core. In that case we can create special shared feature modules as described later in this post.")]),this._v(" "),e("h1",{attrs:{id:"rule-of-thumb-is-to-try-to-create-features-which-don‚Äôt-depend-on-any-other-features-just-on-services-provided-by-coremodule-and-components-provided-by-sharedmodule"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rule-of-thumb-is-to-try-to-create-features-which-don‚Äôt-depend-on-any-other-features-just-on-services-provided-by-coremodule-and-components-provided-by-sharedmodule","aria-hidden":"true"}},[this._v("#")]),this._v(" Rule of thumb is to try to create features which don‚Äôt depend on any other features just on services provided by CoreModule and components provided by SharedModule.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"lazyloading"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#lazyloading","aria-hidden":"true"}},[this._v("#")]),this._v(" LazyLoading")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_2-aliases-for-app-and-environments"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-aliases-for-app-and-environments","aria-hidden":"true"}},[this._v("#")]),this._v(" 2. Aliases for app and environments")])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("h1",{attrs:{id:"definitely-not-the-cleanest-import-ever‚Ä¶"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#definitely-not-the-cleanest-import-ever‚Ä¶","aria-hidden":"true"}},[this._v("#")]),this._v(" Definitely not the cleanest import ever‚Ä¶")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   compilerOptions"),s("span",{attrs:{class:"token operator"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      ..."),s("span",{attrs:{class:"token operator"}},[t._v(":")]),s("span",{attrs:{class:"token string"}},[t._v('"reduced for brevity"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      baseUrl"),s("span",{attrs:{class:"token operator"}},[t._v(":")]),s("span",{attrs:{class:"token string"}},[t._v('"src"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      paths"),s("span",{attrs:{class:"token operator"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         @app/*"),s("span",{attrs:{class:"token operator"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),s("span",{attrs:{class:"token string"}},[t._v('"app/*"')]),t._v("\n         "),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n         @env/*"),s("span",{attrs:{class:"token operator"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),s("span",{attrs:{class:"token string"}},[t._v('"environments/*"')]),t._v("\n         "),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n   "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v('We are also adding @env alias to be able to easily access environment variables from anywhere in our application using same import { environment } from "@env/environment" statement. It will work for all specified environments because it will automatically resolve correct environment file based on --env flag passed to ng build command.')])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("/* 3rd party libraries */")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Component"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" OnInit "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'@angular/core'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Observable "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'rxjs/Observable'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("/* globally accessible app code (in every feature module) */")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" SomeSingletonService "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'@app/core'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" environment "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'@env/environment'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("/* localy accessible feature module code, always use relative path */")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ExampleService "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'./example.service'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n@"),s("span",{attrs:{class:"token function"}},[t._v("Component")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{attrs:{class:"token comment"}},[t._v("/* ... */")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("ExampleComponent")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("OnInit")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{attrs:{class:"token function"}},[t._v("constructor")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" someSingletonService"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" SomeSingletonService"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" exampleService"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ExampleService\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("You may have noticed that we‚Äôre importing entities (like SomeSingletonService in the example above) directly from the @app/core instead of @app/core/some-package/some-singleton.service. This is possible thanks to re-exporting every public entity in main "),e("em",[this._v("index.ts")]),this._v(" file. We create one *index.ts *file per package (folder) and they look something like this‚Ä¶")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'./core.module'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'./auth/auth.service'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'./user/user.service'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'./some-singleton-service/some-singleton.service'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("In this case we will end up with something like import { SomeService } from '@app/shared-feature'; So similarly to "),e("em",[this._v("core")]),this._v(", "),e("em",[this._v("shared-feature")]),this._v(" is also accessed using @app alias.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"https://cdn-images-1.medium.com/max/2000/1*6iBDGXV1ONrIMXm664kKHg.png",alt:"Module dependencies follow tree structure which looks very similar to the well-known component tree"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_3-using-sass"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-using-sass","aria-hidden":"true"}},[this._v("#")]),this._v(" 3. Using Sass")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   apps"),s("span",{attrs:{class:"token operator"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         ..."),s("span",{attrs:{class:"token operator"}},[t._v(":")]),s("span",{attrs:{class:"token string"}},[t._v('"reduced for brevity"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n         stylePreprocessorOptions"),s("span",{attrs:{class:"token operator"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            includePaths"),s("span",{attrs:{class:"token operator"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n               "),s("span",{attrs:{class:"token string"}},[t._v('"./"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n               "),s("span",{attrs:{class:"token string"}},[t._v('"./themes"')]),t._v("\n            "),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n         "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n   "),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("When theming Angular Material apps it‚Äôs a good practice to extract theme definitions into separate themes folder, one theme per file.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_4-the-‚Äúprod‚Äù-build"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-the-‚Äúprod‚Äù-build","aria-hidden":"true"}},[this._v("#")]),this._v(" 4. The ‚ÄúPROD‚Äù build")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"target-production"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#target-production","aria-hidden":"true"}},[this._v("#")]),this._v(" Target Production")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[s("p",[t._v("--environment prod ‚Äîuse environment.prod.ts file for environment variables")])]),t._v(" "),s("li",[s("p",[t._v("--aot ‚Äî enable Ahead-of-Time compilation. This will become a default setting in future versions of Angular CLI but for now we have to enable this manually")])]),t._v(" "),s("li",[s("p",[t._v("--output-hashing all ‚Äî hash contents of the generated files and append hash to the file name to facilitate browser cache busting (any change to file content will result in different hash and hence browser is forced to load a new version of the file)")])]),t._v(" "),s("li",[s("p",[t._v("--extract-css true ‚Äî extract all the css into separate style-sheet file")])]),t._v(" "),s("li",[s("p",[t._v("--sourcemaps false ‚Äî disable generation of source maps")])]),t._v(" "),s("li",[s("p",[t._v("--named-chunks false ‚Äî disable using human readable names for chunk and use numbers instead")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"other-useful-flags"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#other-useful-flags","aria-hidden":"true"}},[this._v("#")]),this._v(" Other useful flags")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("p",[this._v("--build-optimizer ‚Äî new feature which results in smaller bundles but much longer build times so use with caution! (also should be enabled by default in the future)")])]),this._v(" "),e("li",[e("p",[this._v("--vendor-chunk ‚Äî extract all vendor (library) code into separate chunk")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_5-phantom-js-is-dead-long-live-headless-chrome"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-phantom-js-is-dead-long-live-headless-chrome","aria-hidden":"true"}},[this._v("#")]),this._v(" 5. Phantom JS is dead! Long live Headless Chrome!")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("PhantomJS is a very well known headless browser which was defacto "),e("strong",[this._v("THE SOLUTION")]),this._v(" for running frontend tests on CI servers and many dev machines.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"https://cdn-images-1.medium.com/max/4000/1*OncczGezIgnggejIkqRjyA.jpeg",alt:"Headless Chrome ‚Äî The Frontend testing Renaissance has begun!"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"great-so-how-can-we-use-it-in-our-angular-cli-project"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#great-so-how-can-we-use-it-in-our-angular-cli-project","aria-hidden":"true"}},[this._v("#")]),this._v(" Great! So how can we use it in our Angular CLI project?")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v('"test": "ng test --browser ChromeHeadless --single-run"\n')])])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v('"watch": "ng test --browser ChromeHeadless"\n')])])}],!1,null,null,null);n.options.__file="angular-cli-best-practices.md";e.default=n.exports}}]);